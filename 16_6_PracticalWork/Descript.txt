Практическая работа
Цели практической работы
Ещё раз вспомнить уже изученные типы переменных.
Приобрести понятие о внутреннем представлении чисел.
На практике попробовать переводить данные в строки и обратно.
Познакомиться с перечислениями (enum).


Что входит в работу
Спидометр.
Сшиватель дробных чисел.
Калькулятор.
Механическое пианино.
Умный дом.
Общие условия

Разработка выполняется в среде VS Code.



Задание 1. Спидометр
Что нужно сделать
Реализуйте цифровой спидометр автомобиля. Сама модель автомобиля, которую нужно будет воссоздать, весьма проста. Начальная скорость — 0 км/ч. Пользователь вводит в стандартный ввод разницу (дельту) в скорости, и результирующая скорость показывается на спидометре в стандартный вывод. Так происходит до той поры, пока машина снова не остановится, то есть пока скорость не станет меньше или равна нулю (сравнение должно происходить с дельтой в 0,01). Диапазон возможных значений скорости машины от 0 до 150 км/ч. Сам показатель спидометра вместе с единицами измерения требуется записывать в отдельную строку-буфер, которая потом и будет показываться на экране. Точность отображения скорости — до 0,1 км/ч.

Пример работы программы:
Speed delta:30
Speed: 30.0
Speed delta:20.2
Speed: 50.2
Speed delta:100
Speed: 150.0
Speed delta:-22.24
Speed: 127.8
Рекомендации
Используйте цикл do … while для организации постоянного опроса пользователя. Для отображения числа с нужной точностью воспользуйтесь функцией std::sprintf(speed_str, "%.1f", speed_value); где speed_str — строка, в которую функция sprintf «печатает» значение скорости (speed_value) с одним знаком после десятичной точки (%.1f). 



Задание 2. Сшиватель дробных чисел
Что нужно сделать
Напишите небольшую программу. Из целой и дробной частей числа, которые в отдельности вводит пользователь, составьте новое число с плавающей точкой (типа double) и выведите это число обратно в консоль для проверки. Целая часть — это часть числа, которая находится до точки (запятой), дробная — после.

Рекомендации
Вам потребуется функция StringToDouble — std::stod. Она принимает на вход строку, содержащую в себе число.



Задание 3. Калькулятор
Что нужно сделать
Создайте небольшую программу для вычисления простых действий с числами. При запуске программа ожидает пользовательского ввода во временную переменную строку. После ввода строки она распарсивается на отдельные члены. Строка записывается в форме “<число-1><действие><число-2>” (без пробелов). Оба числа — это значения с плавающей точкой, повышенной точности (double). Действие может быть одним из: +, −, /, *. Результат действия выводится в стандартный вывод cout.

Рекомендации
Чтобы разделить полученную строку на отдельные элементы — числа и оператор, воспользуйтесь строковым потоком. Для этого создайте пустую строку std::string buffer и дайте пользователю возможность при помощи std::cin ввести в неё команду. Затем оберните полученную строку так: std::stringstream buffer_stream(buffer); Это позволит вам  получить каждый из трёх компонентов команды: buffer_stream >> a >> operation >> b;



Задание 4. Механическое пианино
Что нужно сделать
Создайте упрощённую модель механического пианино. У этого пианино семь клавиш, которые соответствуют семи нотам. Каждая клавиша кодируется уникальной битовой маской, которая записывается в enum. В начале программы пользователь вводит «аккорд», то есть строку с набором цифр от 1 до 7, например: 1234 или 63.

Далее нужно скомпоновать цифры «аккорда» в одну битовую маску, которую будет содержать переменная типа int, где каждый бит соответствует определённой ноте. В этом случае, даже если при вводе будет введена одна и та же цифра (нота), она превратится только в один конкретный бит (нельзя нажать на одну клавишу два раза, когда мы берём «аккорд»). После того как битовая маска сформирована, программа осуществляет вывод нот из введённого «аккорда».

Рекомендации
Для вычленения отдельных символов-цифр из строки с нотами используйте оператор индексации строки. Для дальнейшей конвертации символа в строку используйте соответствующий конструктор.

Для простоты, чтобы из индекса ноты получить саму ноту-флаг из enum, используйте оператор сдвига. Общая формула такова: 1 << индекс ноты (начинается с нуля). К примеру, 1 << 0 — битовый флаг ноты до, 1 << 6 — битовая маска ноты си.

Перечисление, хранящее ноты, имеет следующий вид: 

enum note
{
    DO = 1,
    RE = 2,
    MI = 4,
    FA = 8,
    SOL = 16,
    LA = 32,
    SI = 64
};
Далее проверяем наличие бита для каждой ноты из enum в битовой маске и выводим ноту, если соответствующий бит выставлен:

if (notes & DO)
        {
            std::cout << "DO";
        }
И так далее.

Где notes — это целое число, хранящее битовую маску «аккорда». 



Задание 5. Умный дом
Что нужно сделать
Разработайте упрощённую модель умного дома для дачи. Выполните симуляцию его работы на протяжении двух дней. Стартовое время для симуляции умного дома 00:00. Есть несколько датчиков: датчик температуры снаружи, датчик температуры внутри дома. В доме расположен электронный умный щиток с автоматами. Каждый автомат отвечает за включение и отключение определённых устройств или групп устройств:

отключение и включение питания всего дома;
основные розетки дома;
свет внутри дома;
наружный свет в саду;
отопление в помещении;
отопление водопровода, идущего из скважины с насосом;
кондиционер в помещении.
Есть несколько условий по включению/отключению техники в доме и вне его.

Как только температура снаружи падает ниже 0 °С, надо включить систему обогрева водопровода. Если температура снаружи поднялась выше 5 °С, то систему обогрева водопровода нужно отключить.
Если на дворе вечер (время больше 16:00 и меньше 5:00 утра) и снаружи есть какое-то движение, то необходимо включить садовое освещение. Если движения нет или время не вечернее, то света снаружи быть не должно.
Если температура в помещении упала ниже 22 °С, должно включиться отопление. Как только температура равна или поднимается выше 25 °С, отопление автоматически отключается.
Если температура в помещении поднялась до 30 °С, включается кондиционер. Как только температура становится 25 °С, кондиционер отключается.
Всё освещение в доме также умное и поддерживает настройку цветовой температуры для комфортного нахождения. Каждый день начиная с 16:00 и до 20:00 температура цвета должна плавно изменяться с 5000K до 2700К. Разумеется, это изменение должно происходить, если свет сейчас включён. В 00:00 температура сбрасывается до 5000К.
Все события по отключению и включению устройств должны выводиться в консоль явным образом. Если устройство не изменило своё состояние (осталось включённым или выключенным), событие генерироваться не должно! Если свет в доме включён, должна отображаться текущая цветовая температура.

Программа выполняется следующим образом:

Каждый час пользователь сообщает состояние всех основных датчиков и света (температура снаружи, температура внутри, есть ли движение снаружи, включён ли свет в доме).
Данные параметры вводятся разом в одну строку через пробел, а потом парсятся в переменные из строкового буфера stringstream.
Информация о движении выводится в формате yes/no.
Включение и отключение света происходит с помощью on/off.
Рекомендации
Состояние переключателей можно хранить в перечислении вида:

enum switches 
{> 
    LIGHTS_INSIDE = 1, 
    LIGHTS_OUTSIDE = 2, 
    HEATERS = 4, 
    WATER_PIPE_HEATING = 8, 
    CONDITIONER = 16 
};
Чтобы включить обогреватель, нужно написать switches_state |= HEATERS; Чтобы выключить — switches_state &= ~HEATERS;

Пример работы программы:

Temperature inside, temperature outside, movement, lights:
10 10 yes on
Heaters ON!
Lights ON!
Color temperature: 5000K
Temperature inside, temperature outside, movement, lights:
10 10 yes on
Color temperature: 5000K
Temperature inside, temperature outside, movement, lights:
30 30 yes on
Heaters OFF!
Conditioner ON!
Color temperature: 5000K
Temperature inside, temperature outside, movement, lights:
30 30 yes on
Color temperature: 5000K
Temperature inside, temperature outside, movement, lights: